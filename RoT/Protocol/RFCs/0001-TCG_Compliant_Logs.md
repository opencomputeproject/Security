* Name: TCG Comliant Measurement Logs
* Date: 2021-05-07
* Pull Request: [#17](https://github.com/opencomputeproject/Security/pull/17)

# Objective

The Cerberus Challenge Protocol provides several mechanisms for accessing measurements
and measured data.  This includes the Attestation Log, which generates a list of
individual measurements.  While this structure is inspired by TCG-style logging, it
is not compatible with parsers of that format.  It is advantagous from an attestation
perspective to have the ability to get fully compliant TCG logs from the device.
This can provide some uniformity with TPM attestation flows, especialy when paired
with the Unseal command.

# Proposal

Update the Get Log command to support an additional Log Type that would provide a
TCG log generated by the device.  The Get Log Info command would not be updated at
this time, as the log sizes, especially for the TCG Log, are not that relevant in
practice.

In the same way that the Get Log command is an optional command, it is not required
that every device support generating TCG-compliant logs.

# Specification Changelist

Add Log Type '4' to the table of supported types for TCG logs.  The descriptive
text for the Get Log command would also need to be updated to reflect the addition
of the new type.

The log structure is defined in Section 10 (Event Logging) of the TCG PC Client
Specific Platform Firmware Profile Specification:
https://trustedcomputinggroup.org/resource/pc-client-specific-platform-firmware-profile-specification

# Implementation Guidance

While it may seem complicated to generate and maintain a full TCG log, it can
actually be achieved in a fairly memory-efficient way.  Even if the log contains
events that have a lot of data.  Rather than making a copy of data and formatting
the log in memory or in storage, the log can be easily reconstructed on demand
through registered callback handlers that can pull data from memory, flash, or
some other arbitrary location.  This is particularly true for devices that
implement the Get Attestation Data command, as this command would report the same
event data that goes into the TCG log.

An example implementation can be found in the open source Cerberus source code here:
https://github.com/Azure/Project-Cerberus/blob/master/core/attestation/pcr_store.c#L544

